!function(a,b){"use strict";function d(a){var d,b=this;a=a||{},d={hasTriggers:!1,hasPrevTrigger:!1,hasNextTrigger:!1,prevTriggerClass:".btn-prev",nextTriggerClass:".btn-next",isLoop:!1,activeIndex:0,container:"#wrapper",panelClass:".page",triggerClass:".trigger",activeClass:"toIn",blurClass:"toOut",backActiveClass:"backIn",backBlurClass:"backOut"},a=c.extend(d,a),b.config=a,b.container=c.$(b.config.container)[0],b.activeIndex=a.activeIndex,b.init()}var c={};c.$=function(a){var b=/(#)+/g,c=Object.prototype.toString.call(a).slice(8,-1);switch(c){case"Object":return a;case"String":return b.test(a)?document.querySelector(a):document.querySelectorAll(a)}},c.addClass=function(a,b){if(a.className){var c=a.className;c+=" ",c+=b,a.className=c}else a.className=b},c.removeClass=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className.match(c)&&(a.className=a.className.replace(c,""))},c.hasClass=function(a,b){var c=new new RegExp("(\\s|^)"+b+"(\\s|$)");return c.test(a.className)?!0:!1},c.getStyle=function(a,b){var c=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return a.style[c]?a.style[c]:a.currentStyle?a.currentStyle.getAttribute(c):document.defaultView.getComputedStyle(a,null).getPropertyValue(c)},c.applyStyle=function(a,b){var d,c=Object.prototype.toString.call(b).slice(8,-1);if("Object"==c)for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d])},c.is=function(a,b){var c,d,e,f;return b=arguments[1],"string"==typeof b?(c=new RegExp("(\\s|^)"+b+"(\\s|$)"),d=/(\s|^)\.[\w-]+(\s|$)/,e=/(\s|^)#[\w-]+(\s|$)/,f=/(\s|^)[\w-]+(\s|$)/,d.test(b)&&(b=b.replace(/\./,""),c=new RegExp("(\\s|^)"+b+"(\\s|$)"),c.test(a.className))?!0:e.test(b)&&(b=b.replace(/\#/,""),c=new RegExp("(\\s|^)"+b+"(\\s|$)"),c.test(a.getAttribute("id")))?!0:f.test(b)&&c.test(a.tagName.toLowerCase())?!0:!1):"object"==typeof b?b==a?!0:!1:void 0},c.isType=function(a,b){return Object.prototype.toString.call(a).slice(8,-1)===b},c.contain=function(a,b){if("function"==typeof a.contains)return a.contains(b);if("function"==typeof a.compareDocumentPosition)return!!a.compareDocumentPosition(b);var c=b.parentNode;do{if(c===a)return!0;c=c.parentNode}while(null!==c);return!1},c.each=function(a,c,d){var e,h,f=0,g=a.length;if(d)if(g==b){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(g==b){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(h=a[0];g>f&&c.call(h,f,h)!==!1;h=a[++f]);return a},c.extend=function(){var e,f,g,h,a=arguments,b=a.length,d={};if(b){for(e=b-1;e>=0;e--){f=arguments[e],g=d;for(h in f)if(f.hasOwnProperty(h)){if(c.isType(f[h],"Object")&&_isType(g[h],"Object")&&arguments.callee(f[h],g[h]),g.hasOwnProperty(h))continue;g[h]=f[h]}}return d}},d.Plugins=[],d.prototype={init:function(){var a=this,b=a.config;a.parseMarkup(),b.switchTo&&a.switchTo(b.switchTo,direction),b.hasTriggers&&a.bindTrigger(),b.hasNextTrigger&&a.bindNext(),b.hasPrevTrigger&&a.bindPrev(),a.bindSwitch(),c.each(d.Plugins,function(b){b.init&&b.init(a)}),0==a.activeIndex&&a.fireAni(0)},parseMarkup:function(){var f,g,h,i,j,k,l,m,a=this,b=a.container,c=a.config,d=a.activeIndex,e=document.querySelectorAll(c.panelClass);if(a.length=e.length,a.panels=e,c.hasTriggers){for(g=document.querySelectorAll(".operate").length>0?!1:!0,g?(h=document.createElement("div"),h.setAttribute("class","operate")):h=document.querySelector(".operate"),i="",j=0,k=a.length;k-1>j;j++)j==d&&(i+='<li class="trigger active"></li>'),i+='<li class="trigger"></li>';h.innerHTML='<ul class="trigger-list">'+i+"</ul>",b.appendChild(h),f=document.querySelectorAll(c.triggerClass),a.triggers=f}c.hasPrevTrigger&&(g=document.querySelectorAll(".operate").length>0?!1:!0,g?(h=document.createElement("div"),h.innerHTML='<div class="btn-prev"></div>',b.appendChild(h)):(l=document.createElement("div"),l.setAttribute("class","btn-prev"),h=document.querySelector(".operate"),h.appendChild(l))),c.hasNextTrigger&&(g=document.querySelectorAll(".operate").length>0?!1:!0,g?(h=document.createElement("div"),h.innerHTML='<div class="btn-next"></div>',b.appendChild(h)):(m=document.createElement("div"),m.setAttribute("class","btn-next"),h=document.querySelector(".operate"),h.appendChild(m)))},onFocusTrigger:function(a){var c,d,b=this;b.triggerIsValid(c)&&(c=b.activeIndex,d=parseInt(a)>parseInt(c)?"to":"back",b.switchTo(a,d))},bindTrigger:function(){var e,f,g,a=this,b=a.config;for(a.container,e=c.$(b.triggerClass),f=e.length,g=f-1;g>=0;g--)!function(b){e[b].addEventListener("tap",function(){a.onFocusTrigger(b)})}(g)},bindInlineLink:function(a,b){var f,c=this,d=c.activeIndex,e=a;b=b,f=parseInt(b)>parseInt(d)?"to":"back",e.addEventListener("tap",function(){alert("sds"),c.switchTo(b,f)})},triggerIsValid:function(a){var b=this;return b.activeIndex!==a},cancelSwitchTimer:function(){var a=this;a.switchTimer&&(a.switchTimer.cancel(),a.switchTimer=b)},switchTo:function(a,b){var e,f,c=this;c.config,c.triggerIsValid(a)&&(e=c.panels[c.activeIndex],f=c.panels[a],c.switchView(e,f,a,b),c.switchTrigger(a))},fireAni:function(a){var g,h,b=this,d=b.panels[a],e=document.querySelectorAll('[node-type="module"]'),f=d.querySelectorAll('[node-type="module"]');for(g=e.length-1;g>=0;g--)h=e[g].getAttribute("data-ani"),c.removeClass(e[g],h);for(g=f.length-1;g>=0;g--)h=f[g].getAttribute("data-ani"),c.addClass(f[g],h)},switchView:function(a,b,d,e){var h,f=this,g=f.config;if("to"==e){for(h=f.panels.length-1;h>=0;h--)c.removeClass(f.panels[h],g.blurClass),c.removeClass(f.panels[h],g.backBlurClass),c.removeClass(f.panels[h],g.activeClass),c.removeClass(f.panels[h],g.backActiveClass),c.removeClass(f.panels[h],"active");c.removeClass(b,g.blurClass),c.addClass(b,g.activeClass),c.removeClass(a,g.activeClass),c.addClass(a,g.blurClass)}if("back"==e){for(h=f.panels.length-1;h>=0;h--)c.removeClass(f.panels[h],g.blurClass),c.removeClass(f.panels[h],g.backBlurClass),c.removeClass(f.panels[h],g.activeClass),c.removeClass(f.panels[h],g.backActiveClass),c.removeClass(f.panels[h],"active");c.removeClass(b,g.backBlurClass),c.addClass(b,g.backActiveClass),c.removeClass(a,g.backActiveClass),c.addClass(a,g.backBlurClass)}f.activeIndex=d,f.fireAni(d)},switchTrigger:function(a){var e,f,b=this;for(b.config,e=0,f=b.triggers.length;f>e;e++)c.removeClass(b.triggers[e],"active");c.addClass(b.triggers[a],"active")},bindSwitch:function(){var a=this;document.body.addEventListener("swipeUp",function(){a.next()}),document.body.addEventListener("swipeDown",function(){a.prev()})},bindPrev:function(){var a=this,b=a.config,c=document.querySelector(b.prevTriggerClass);c.addEventListener("tap",function(){a.prev()})},bindNext:function(){var a=this,b=a.config,c=document.querySelector(b.nextTriggerClass);c.addEventListener("tap",function(){a.next()})},prev:function(){var a=this,b=a.config,c=a.activeIndex;c=b.isLoop?c>0?c-1:a.length-1:c>0?c-1:0,a.switchTo(c,"back")},next:function(){var a=this,b=a.config,c=a.activeIndex;c=b.isLoop?c<a.length-1?c+1:0:c<a.length-1?c+1:a.length-1,a.switchTo(c,"to")}},a.mSlide=d}(window);